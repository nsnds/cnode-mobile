webpackJsonp([1],{"0lia":function(t,s){},"3HKF":function(t,s){},AxJa:function(t,s){},Gaex:function(t,s){},NBF2:function(t,s,e){t.exports=e.p+"static/img/vue-logo.e1ea82c.png"},NHnr:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var n={};e.d(n,"shadeShow",function(){return W}),e.d(n,"menuShow",function(){return Y}),e.d(n,"accessToken",function(){return q}),e.d(n,"loginInfo",function(){return B}),e.d(n,"messageCount",function(){return Q});var a=e("i8gr"),i=e("4YfN"),o=e.n(i),c=e("9rMa"),r={data:function(){return{}},computed:o()({},Object(c.b)(["menuShow","shadeShow"])),mounted:function(){},methods:o()({toggle:function(){this.menuShow?(this.setShadeShow(!1),this.setMenuShow(!1)):(this.setShadeShow(!0),this.setMenuShow(!0))}},Object(c.c)({setShadeShow:"SET_SHADE_SHOW",setMenuShow:"SET_MENU_SHOW"}))},l={render:function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"header-box"},[s("div",{staticClass:"left",on:{click:this.toggle}},[s("i",{class:this.menuShow?"icon-menuActive":"icon-menu"})]),this._v(" "),this._m(0),this._v(" "),s("div",{staticClass:"right"})])},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"center"},[s("img",{staticClass:"logo",attrs:{src:e("NBF2")}}),this._v(" "),s("p",{staticClass:"text"},[this._v("全部")])])}]};var u=e("Z0/y")(r,l,!1,function(t){e("AxJa")},null,null).exports,h={name:"m-menu",data:function(){return{list:[{text:"全部",icon:"icon-all",link:"all"},{text:"精华",icon:"icon-favorite",link:"good"},{text:"分享",icon:"icon-skip",link:"share"},{text:"问答",icon:"icon-help",link:"ask"},{text:"招聘",icon:"icon-lights",link:"job"}],currentListIdx:0}},computed:o()({Status:function(){return this.$route.query.status}},Object(c.b)(["menuShow","loginInfo"])),methods:{to:function(t){this.$router.push({path:"/?status="+t})}}},_={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("transition",{attrs:{name:"menu"}},[t.menuShow?e("ul",{staticClass:"menu-box"},[t.loginInfo?e("li",{staticClass:"user",on:{click:function(s){t.$router.push("/user?name="+t.loginInfo.loginname)}}},[e("img",{staticClass:"avatar",attrs:{src:t.loginInfo.avatar_url}}),t._v(" "),e("p",{staticClass:"text"},[t._v(t._s(t.loginInfo.loginname))])]):e("li",{staticClass:"login",on:{click:function(s){t.$router.push("/login")}}},[e("i",{staticClass:"icon-user"}),t._v(" "),e("p",{staticClass:"text"},[t._v("登录")])]),t._v(" "),t._l(t.list,function(s,n){return e("li",{key:n,staticClass:"item",class:s.link===t.Status?"active":"",on:{click:function(e){t.to(s.link)}}},[e("i",{class:s.icon}),t._v(" "),e("p",{staticClass:"text"},[t._v(t._s(s.text))])])}),t._v(" "),e("li",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"item comments"},[e("i",{staticClass:"icon-comments"}),t._v(" "),e("p",{staticClass:"text"},[t._v("消息")])])],2):t._e()])},staticRenderFns:[]};var v=e("Z0/y")(h,_,!1,function(t){e("OjUl")},"data-v-3b0754f8",null).exports,f={computed:o()({},Object(c.b)(["menuShow","shadeShow"])),methods:o()({tapShade:function(){this.menuShow&&(this.setShadeShow(!1),this.setMenuShow(!1))}},Object(c.c)({setShadeShow:"SET_SHADE_SHOW",setMenuShow:"SET_MENU_SHOW"}))},d={render:function(){var t=this.$createElement,s=this._self._c||t;return s("transition",{attrs:{name:"fade"}},[this.shadeShow?s("div",{staticClass:"shade-box",on:{click:this.tapShade}}):this._e()])},staticRenderFns:[]};var p={name:"App",components:{mMenu:v,mHeader:u,mShade:e("Z0/y")(f,d,!1,function(t){e("Gaex")},null,null).exports}},m={render:function(){var t=this.$createElement,s=this._self._c||t;return s("div",{attrs:{id:"app"}},[s("m-header"),this._v(" "),s("m-Menu"),this._v(" "),s("router-view"),this._v(" "),s("m-shade")],1)},staticRenderFns:[]};var C=e("Z0/y")(p,m,!1,function(t){e("ezK7")},null,null).exports,g=e("zO6J"),S=e("aA9S"),k=e.n(S),w=e("HzJ8"),b=e.n(w),x=e("rVsN"),y=e.n(x),T="https://cnodejs.org/api/v1",I=e("aozt"),A=e.n(I),E={data:function(){return{list:[],idx:1,size:15,busy:!0}},mounted:function(){this.initData()},methods:{initData:function(){this.status=this.$route.query.status,void 0===this.status&&(this.status="all"),this.idx=1,this.list=[],this.searchData()},searchData:function(){var t=this;this.busy=!0;var s,e,n={page:this.idx,tab:this.status,limit:this.size};(s=n,e={page:s.page,tab:s.tab,limit:s.limit,mdrender:!1},A()({method:"get",url:T+"/topics",params:e}).then(function(t){return y.a.resolve(t.data)}).catch(function(t){return y.a.reject(t.data)})).then(function(s){if(s.success){var e=!0,n=!1,a=void 0;try{for(var i,o=b()(s.data);!(e=(i=o.next()).done);e=!0){var c=i.value,r=c.tab,l=void 0;switch(c.top&&(r="top"),c.good&&(r="good"),r){case"top":l="置顶";break;case"good":l="精华";break;case"share":l="分享";break;case"ask":l="提问";break;case"job":l="招聘"}var u=k()(c,{tipName:l});t.list.push(u)}}catch(t){n=!0,a=t}finally{try{!e&&o.return&&o.return()}finally{if(n)throw a}}s.data.length&&(t.busy=!1,t.idx++)}})},to:function(t){"string"==typeof t&&this.$router.push(t)}},watch:{$route:"initData"}},O={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"index-box"},[e("ul",{staticClass:"list"},t._l(t.list,function(s,n){return e("li",{key:n,staticClass:"item",on:{click:function(e){e.stopPropagation(),t.to("/topics?id="+s.id)}}},[e("h3",{staticClass:"title"},[e("span",{class:["tip","置顶"===s.tipName||"精华"===s.tipName?"active":""]},[t._v("\n          "+t._s(s.tipName)+"\n        ")]),t._v(" "),e("p",{staticClass:"text"},[t._v(t._s(s.title))])]),t._v(" "),e("div",{staticClass:"info"},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:s.author.avatar_url,expression:"item.author.avatar_url"}],staticClass:"author-avatar",on:{click:function(e){e.stopPropagation(),t.to("/user?name="+s.author.loginname)}}}),t._v(" "),e("div",{staticClass:"author-info"},[e("span",{staticClass:"name",attrs:{title:"发布人"}},[t._v(t._s(s.author.loginname))]),t._v(" "),e("span",{staticClass:"time",attrs:{title:"发布时间"}},[t._v(t._s(t._f("time")(s.create_at)))])]),t._v(" "),e("div",{staticClass:"participation-info"},[e("span",{staticClass:"num",attrs:{title:"回复/查看"}},[t._v(t._s(s.reply_count)+" / "+t._s(s.visit_count))]),t._v(" "),e("span",{staticClass:"time",attrs:{title:"最近回复时间"}},[t._v(t._s(t._f("time")(s.last_reply_at)))])])])])})),t._v(" "),e("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.searchData,expression:"searchData"}],attrs:{"infinite-scroll-disabled":"busy","infinite-scroll-distance":"33"}})])},staticRenderFns:[]};var N=e("Z0/y")(E,O,!1,function(t){e("Z1SY")},"data-v-3cf5059c",null).exports,$={name:"login",data:function(){return{AccessToken:""}},computed:o()({},Object(c.b)(["accessToken","loginInfo"])),mounted:function(){this.initData()},methods:o()({initData:function(){var t=this.loginInfo,s=this.accessToken;if(void 0!==t)return this.$router.push("/");s&&(this.AccessToken=this.accessToken)},login:function(){var t,s,e=this,n=this.AccessToken;if(!n)return alert("请输入Access Token");(t=n,s={accesstoken:t},A()({method:"post",url:T+"/accesstoken",data:s}).then(function(t){return y.a.resolve(t.data)}).catch(function(t){return y.a.reject(t.data)})).then(function(t){e.setAccessToken(n),e.setLoginInfo(t),e.$router.push("/")}).catch(function(t){return alert("登录失败!")})}},Object(c.c)({setLoginInfo:"SET_LOGIN_INFO",setAccessToken:"SET_ACCESS_TOKEN"}))},D={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"login-box"},[e("div",{staticClass:"ipt"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.AccessToken,expression:"AccessToken"}],staticClass:"needsclick",attrs:{type:"text",placeholder:"Access Token"},domProps:{value:t.AccessToken},on:{input:function(s){s.target.composing||(t.AccessToken=s.target.value)}}})]),t._v(" "),e("button",{staticClass:"btn",on:{click:t.login}},[t._v("登录")])])},staticRenderFns:[]};var j=e("Z0/y")($,D,!1,function(t){e("TbAA")},"data-v-49b697b2",null).exports,H={name:"user",data:function(){return{userInfo:{},topicsAllShow:!1,repliesAllShow:!1}},computed:o()({},Object(c.b)(["loginInfo"]),{topics:function(){return void 0===this.userInfo.recent_topics?[]:this.topicsAllShow?this.userInfo.recent_topics:this.userInfo.recent_topics.slice(0,3)},replies:function(){return void 0===this.userInfo.recent_replies?[]:this.repliesAllShow?this.userInfo.recent_replies:this.userInfo.recent_replies.slice(0,3)}}),mounted:function(){this.initData()},methods:{initData:function(){var t=this.$route.query.name;this.search(t)},search:function(t){var s=this;(function(t){var s="/user/"+t;return A()({method:"get",url:T+s}).then(function(t){return y.a.resolve(t.data)}).catch(function(t){return y.a.reject(t.data)})})(t).then(function(t){console.log(t),s.userInfo=t.data}).catch(function(t){return alert(t)})}},watch:{$route:function(t,s){this.initData()}}},F={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"user-box"},[e("div",{staticClass:"base"},[e("div",{staticClass:"avatar"},[e("img",{attrs:{src:t.userInfo.avatar_url}})]),t._v(" "),e("ul",{staticClass:"items"},[e("li",{staticClass:"item"},[e("span",{staticClass:"title"},[t._v("用户名: ")]),t._v(" "),e("span",{staticClass:"text"},[t._v(t._s(t.userInfo.loginname))])]),t._v(" "),e("li",{staticClass:"item"},[e("span",{staticClass:"title"},[t._v("github: ")]),t._v(" "),e("span",{staticClass:"text"},[t._v(t._s(t.userInfo.githubUsername))])]),t._v(" "),e("li",{staticClass:"item"},[e("span",{staticClass:"title"},[t._v("积分: ")]),t._v(" "),e("span",{staticClass:"text"},[t._v(t._s(t.userInfo.score))])]),t._v(" "),e("li",{staticClass:"item"},[e("span",{staticClass:"title"},[t._v("创建时间: ")]),t._v(" "),e("span",{staticClass:"text"},[t._v(t._s(t._f("time")(t.userInfo.create_at)))])])])]),t._v(" "),e("div",{staticClass:"more"},[e("h2",{staticClass:"title"},[e("p",{staticClass:"left"},[t._v("最近发布")]),t._v(" "),e("p",{staticClass:"right",on:{click:function(s){t.topicsAllShow=!t.topicsAllShow}}},[t._v("\n        "+t._s(t.topicsAllShow?"收起":"更多>>")+"\n      ")])]),t._v(" "),e("ul",{staticClass:"default"},t._l(t.topics,function(s,n){return e("li",{key:n},[e("img",{staticClass:"avatar",attrs:{src:s.author.avatar_url}}),t._v(" "),e("div",{staticClass:"content"},[e("p",{staticClass:"title"},[t._v(t._s(s.title))]),t._v(" "),e("p",{staticClass:"row-2"},[e("span",{staticClass:"author"},[t._v(t._s(s.author.loginname))]),t._v(" "),e("span",{staticClass:"time"},[t._v(t._s(t._f("time")(s.last_reply_at)))])])])])})),t._v(" "),e("h2",{staticClass:"title"},[e("p",{staticClass:"left"},[t._v("最近参与")]),t._v(" "),e("P",{staticClass:"right",on:{click:function(s){t.repliesAllShow=!t.repliesAllShow}}},[t._v("\n        "+t._s(t.repliesAllShow?"收起":"更多>>")+"\n      ")])],1),t._v(" "),e("ul",{staticClass:"default"},t._l(t.replies,function(s,n){return e("li",{key:n},[e("img",{staticClass:"avatar",attrs:{src:s.author.avatar_url}}),t._v(" "),e("div",{staticClass:"content"},[e("p",{staticClass:"title"},[t._v(t._s(s.title))]),t._v(" "),e("p",{staticClass:"row-2"},[e("span",{staticClass:"author"},[t._v(t._s(s.author.loginname))]),t._v(" "),e("span",{staticClass:"time"},[t._v(t._s(t._f("time")(s.last_reply_at)))])])])])}))])])},staticRenderFns:[]};var M=e("Z0/y")(H,F,!1,function(t){e("kQ3+")},null,null).exports,z={data:function(){return{content:{}}},computed:o()({},Object(c.b)(["accessToken"])),mounted:function(){this.initData()},methods:{initData:function(){var t=this.accesstoken,s={accesstoken:void 0===t?"":t,id:this.$route.query.id};this.searchData(s)},searchData:function(t){var s=this;(function(t){var s="/topic/"+t.id,e={accesstoken:t.accesstoken,mdrender:!0};return A()({method:"get",url:T+s,params:e}).then(function(t){return y.a.resolve(t.data)}).catch(function(t){return y.a.reject(t.data)})})(t).then(function(t){console.log(t),s.content=t.data}).catch(function(t){console.log(t)})}}},Z={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return t.content.id?e("div",{staticClass:"topicsDefault"},[e("h3",{staticClass:"title"},[t._v(t._s(t.content.title))]),t._v(" "),e("div",{staticClass:"baseInfo"},[e("img",{staticClass:"author_url",attrs:{src:t.content.author.avatar_url}}),t._v(" "),e("p",{staticClass:"row1"},[e("span",{staticClass:"author-name"},[t._v(t._s(t.content.author.loginname))]),t._v(" "),e("span",{staticClass:"time"},[t._v("发布于"+t._s(t._f("time")(t.content.create_at)))])]),t._v(" "),e("p",{staticClass:"row2"},[e("span",{staticClass:"tip"},[t._v("问答")]),t._v(" "),e("span",{staticClass:"visit-count"},[t._v(t._s(t.content.visit_count)+"次浏览")])])]),t._v(" "),e("div",{staticClass:"markdown-body",domProps:{innerHTML:t._s(t.content.content)}}),t._v(" "),e("div",{staticClass:"reply-box"},[e("h3",{staticClass:"title"},[e("span",[t._v(t._s(t.content.reply_count))]),t._v(" "),e("span",[t._v("回复")])]),t._v(" "),e("ul",{staticClass:"reply-list"},t._l(t.content.replies,function(s,n){return e("li",{key:n,staticClass:"item"},[e("div",{staticClass:"user"},[e("img",{staticClass:"avatar_url",attrs:{src:s.author.avatar_url}}),t._v(" "),e("span",{staticClass:"name"},[t._v(t._s(s.author.loginname))]),t._v(" "),e("span",{staticClass:"time"},[t._v(t._s(t._f("time")(s.create_at)))])]),t._v(" "),e("div",{staticClass:"markdown-body",staticStyle:{"margin-left":"0","margin-right":"0"},domProps:{innerHTML:t._s(s.content)}}),t._v(" "),e("div",{staticClass:"more"},[e("span",{staticClass:"good"},[e("i",{staticClass:"icon-good"}),t._v(" "),e("span",[t._v(t._s(s.ups.length))])]),t._v(" "),t._m(0,!0)])])}))])]):t._e()},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("span",{staticClass:"reply"},[s("i",{staticClass:"icon-code"})])}]};var L=e("Z0/y")(z,Z,!1,function(t){e("uKgE")},null,null).exports;a.a.use(g.a);var K,R=new g.a({routes:[{path:"/",name:"Index",component:N},{path:"/login",name:"login",component:j},{path:"/user",name:"user",component:M},{path:"/topics",name:"topics",component:L}]}),J=e("3cXf"),P=e.n(J),U=function(t,s){if(t&&"string"==typeof t){if(t&&void 0===s){var e=JSON.parse(window.sessionStorage.getItem("nsnds_"+t));return null===e?void 0:e}return window.sessionStorage.setItem("nsnds_"+t,P()(s)),"ok"}},G={shadeShow:!1,menuShow:!1,accessToken:U("accessToken"),loginInfo:U("loginInfo"),messageCount:0},W=function(t){return t.shadeShow},Y=function(t){return t.menuShow},q=function(t){return t.accessToken},B=function(t){return t.loginInfo},Q=function(t){return t.messageCount},V=e("a3Yh"),X=e.n(V),tt=(K={},X()(K,"SET_SHADE_SHOW",function(t,s){t.shadeShow=s}),X()(K,"SET_MENU_SHOW",function(t,s){t.menuShow=s}),X()(K,"SET_ACCESS_TOKEN",function(t,s){U("accessToken",s),t.accessToken=s}),X()(K,"SET_LOGIN_INFO",function(t,s){U("loginInfo",s),t.loginInfo=s}),X()(K,"SET_MESSAGE_COUNT",function(t,s){t.messageCount=s}),K);e("6LYt");a.a.use(c.a);var st=new c.a.Store({state:G,getters:n,mutations:tt,strict:!1,plugins:[]}),et=e("iDdd"),nt=e.n(et),at=e("lJzc"),it=e.n(at),ot=e("GLlk"),ct=e.n(ot);e("3HKF"),e("0lia");nt.a.attach(document.body),a.a.use(it.a,{loading:e("NBF2")}),a.a.use(ct.a),a.a.filter("time",function(t){return"string"!=typeof t?"":t.split(".")[0].split("T").join(" ")}),a.a.config.productionTip=!1,new a.a({el:"#app",router:R,store:st,render:function(t){return t(C)}})},OjUl:function(t,s){},TbAA:function(t,s){},Z1SY:function(t,s){},ezK7:function(t,s){},"kQ3+":function(t,s){},uKgE:function(t,s){}},["NHnr"]);
//# sourceMappingURL=app.f75c3328d5cc86901ce8.js.map