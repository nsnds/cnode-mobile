webpackJsonp([1],{"0lia":function(t,s){},"3HKF":function(t,s){},AxJa:function(t,s){},Gaex:function(t,s){},KsSw:function(t,s){},NBF2:function(t,s,n){t.exports=n.p+"static/img/vue-logo.e1ea82c.png"},NHnr:function(t,s,n){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var e={};n.d(e,"shadeShow",function(){return W}),n.d(e,"menuShow",function(){return Y}),n.d(e,"accessToken",function(){return G}),n.d(e,"loginInfo",function(){return X});var a=n("i8gr"),i=n("4YfN"),o=n.n(i),c=n("9rMa"),r={data:function(){return{}},computed:o()({},Object(c.b)(["menuShow","shadeShow"])),mounted:function(){},methods:o()({toggle:function(){this.menuShow?(this.setShadeShow(!1),this.setMenuShow(!1)):(this.setShadeShow(!0),this.setMenuShow(!0))}},Object(c.c)({setShadeShow:"SET_SHADE_SHOW",setMenuShow:"SET_MENU_SHOW"}))},l={render:function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"header-box"},[s("div",{staticClass:"left",on:{click:this.toggle}},[s("i",{class:this.menuShow?"icon-menuActive":"icon-menu"})]),this._v(" "),this._m(0),this._v(" "),s("div",{staticClass:"right"})])},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"center"},[s("img",{staticClass:"logo",attrs:{src:n("NBF2")}}),this._v(" "),s("p",{staticClass:"text"},[this._v("全部")])])}]};var u=n("Z0/y")(r,l,!1,function(t){n("AxJa")},null,null).exports,h={name:"m-menu",data:function(){return{list:[{text:"全部",icon:"icon-all",link:"all"},{text:"精华",icon:"icon-favorite",link:"good"},{text:"分享",icon:"icon-skip",link:"share"},{text:"问答",icon:"icon-help",link:"ask"},{text:"招聘",icon:"icon-lights",link:"job"}],currentListIdx:0}},computed:o()({Status:function(){return this.$route.query.status}},Object(c.b)(["menuShow","loginInfo"])),methods:{to:function(t){this.$router.push({path:"/?status="+t})}}},_={render:function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("transition",{attrs:{name:"menu"}},[t.menuShow?n("ul",{staticClass:"menu-box"},[t.loginInfo?n("li",{staticClass:"user",on:{click:function(s){t.$router.push("/user?name="+t.loginInfo.loginname)}}},[n("img",{staticClass:"avatar",attrs:{src:t.loginInfo.avatar_url}}),t._v(" "),n("p",{staticClass:"text"},[t._v(t._s(t.loginInfo.loginname))])]):n("li",{staticClass:"login",on:{click:function(s){t.$router.push("/login")}}},[n("i",{staticClass:"icon-user"}),t._v(" "),n("p",{staticClass:"text"},[t._v("登录")])]),t._v(" "),t._l(t.list,function(s,e){return n("li",{key:e,staticClass:"item",class:s.link===t.Status?"active":"",on:{click:function(n){t.to(s.link)}}},[n("i",{class:s.icon}),t._v(" "),n("p",{staticClass:"text"},[t._v(t._s(s.text))])])}),t._v(" "),n("li",{staticClass:"item comments"},[n("i",{staticClass:"icon-comments"}),t._v(" "),n("p",{staticClass:"text"},[t._v("消息")])])],2):t._e()])},staticRenderFns:[]};var v=n("Z0/y")(h,_,!1,function(t){n("YNnX")},"data-v-391268d0",null).exports,f={computed:o()({},Object(c.b)(["menuShow","shadeShow"])),methods:o()({tapShade:function(){this.menuShow&&(this.setShadeShow(!1),this.setMenuShow(!1))}},Object(c.c)({setShadeShow:"SET_SHADE_SHOW",setMenuShow:"SET_MENU_SHOW"}))},d={render:function(){var t=this.$createElement,s=this._self._c||t;return s("transition",{attrs:{name:"fade"}},[this.shadeShow?s("div",{staticClass:"shade-box",on:{click:this.tapShade}}):this._e()])},staticRenderFns:[]};var p={name:"App",components:{mMenu:v,mHeader:u,mShade:n("Z0/y")(f,d,!1,function(t){n("Gaex")},null,null).exports}},m={render:function(){var t=this.$createElement,s=this._self._c||t;return s("div",{attrs:{id:"app"}},[s("m-header"),this._v(" "),s("m-Menu"),this._v(" "),s("router-view"),this._v(" "),s("m-shade")],1)},staticRenderFns:[]};var C=n("Z0/y")(p,m,!1,function(t){n("ezK7")},null,null).exports,g=n("zO6J"),S=n("aA9S"),k=n.n(S),w=n("HzJ8"),b=n.n(w),x=n("rVsN"),y=n.n(x),T="https://cnodejs.org/api/v1",I=n("aozt"),A=n.n(I),E=n("Mqpf"),N={data:function(){return{list:[],idx:1,size:15}},mounted:function(){this.scrollFinish=!0,this.initData(),this.initBscroll()},methods:{initData:function(){var t=this.$route.query.status;void 0===t&&(t="all");var s={page:1,tab:t,limit:this.size};this.list=[],this.searchData(s)},initBscroll:function(){var t=this,s=document.querySelector(".index-box");this.scroll=new E.a(s,{probeType:1,pullUpLoad:{threshold:-20}}),this.scroll.on("pullingUp",function(){t.searchData(obj)})},searchData:function(t){var s=this;(function(t){var s={page:t.page,tab:t.tab,limit:t.limit,mdrender:!1};return A()({method:"get",url:T+"/topics",params:s}).then(function(t){return y.a.resolve(t.data)}).catch(function(t){return y.a.reject(t.data)})})(t).then(function(t){if(t.success){var n=!0,e=!1,a=void 0;try{for(var i,o=b()(t.data);!(n=(i=o.next()).done);n=!0){var c=i.value,r=c.tab,l=void 0;switch(c.top&&(r="top"),c.good&&(r="good"),r){case"top":l="置顶";break;case"good":l="精华";break;case"share":l="分享";break;case"ask":l="提问";break;case"job":l="招聘"}var u=k()(c,{tipName:l});s.list.push(u)}}catch(t){e=!0,a=t}finally{try{!n&&o.return&&o.return()}finally{if(e)throw a}}t.data.length&&s.idx++}})},to:function(t){"string"==typeof t&&this.$router.push(t)}},watch:{$route:"initData",list:function(t,s){this.initBscroll()}}},O={render:function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"index-box"},[n("ul",{staticClass:"list"},t._l(t.list,function(s,e){return n("li",{key:e,staticClass:"item",on:{click:function(n){n.stopPropagation(),t.to("/topics?id="+s.id)}}},[n("h3",{staticClass:"title"},[n("span",{class:["tip","置顶"===s.tipName||"精华"===s.tipName?"active":""]},[t._v("\n          "+t._s(s.tipName)+"\n        ")]),t._v(" "),n("p",{staticClass:"text"},[t._v(t._s(s.title))])]),t._v(" "),n("div",{staticClass:"info"},[n("img",{directives:[{name:"lazy",rawName:"v-lazy",value:s.author.avatar_url,expression:"item.author.avatar_url"}],staticClass:"author-avatar",on:{click:function(n){n.stopPropagation(),t.to("/user?name="+s.author.loginname)}}}),t._v(" "),n("div",{staticClass:"author-info"},[n("span",{staticClass:"name",attrs:{title:"发布人"}},[t._v(t._s(s.author.loginname))]),t._v(" "),n("span",{staticClass:"time",attrs:{title:"发布时间"}},[t._v(t._s(t._f("time")(s.create_at)))])]),t._v(" "),n("div",{staticClass:"participation-info"},[n("span",{staticClass:"num",attrs:{title:"回复/查看"}},[t._v(t._s(s.reply_count)+" / "+t._s(s.visit_count))]),t._v(" "),n("span",{staticClass:"time",attrs:{title:"最近回复时间"}},[t._v(t._s(t._f("time")(s.last_reply_at)))])])])])}))])},staticRenderFns:[]};var $=n("Z0/y")(N,O,!1,function(t){n("KsSw")},"data-v-3991e880",null).exports,D={name:"login",data:function(){return{AccessToken:""}},computed:o()({},Object(c.b)(["accessToken","loginInfo"])),mounted:function(){this.initData()},methods:o()({initData:function(){var t=this.loginInfo,s=this.accessToken;if(void 0!==t)return this.$router.push("/");s&&(this.AccessToken=this.accessToken)},login:function(){var t,s,n=this,e=this.AccessToken;if(!e)return alert("请输入Access Token");(t=e,s={accesstoken:t},A()({method:"post",url:T+"/accesstoken",data:s}).then(function(t){return y.a.resolve(t.data)}).catch(function(t){return y.a.reject(t.data)})).then(function(t){n.setAccessToken(e),n.setLoginInfo(t),n.$router.push("/")}).catch(function(t){return alert("登录失败!")})}},Object(c.c)({setLoginInfo:"SET_LOGIN_INFO",setAccessToken:"SET_ACCESS_TOKEN"}))},j={render:function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"login-box"},[n("div",{staticClass:"ipt"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.AccessToken,expression:"AccessToken"}],staticClass:"needsclick",attrs:{type:"text",placeholder:"Access Token"},domProps:{value:t.AccessToken},on:{input:function(s){s.target.composing||(t.AccessToken=s.target.value)}}})]),t._v(" "),n("button",{staticClass:"btn",on:{click:t.login}},[t._v("登录")])])},staticRenderFns:[]};var H=n("Z0/y")(D,j,!1,function(t){n("TbAA")},"data-v-49b697b2",null).exports,F={name:"user",data:function(){return{userInfo:{},topicsAllShow:!1,repliesAllShow:!1}},computed:o()({},Object(c.b)(["loginInfo"]),{topics:function(){return void 0===this.userInfo.recent_topics?[]:this.topicsAllShow?this.userInfo.recent_topics:this.userInfo.recent_topics.slice(0,3)},replies:function(){return void 0===this.userInfo.recent_replies?[]:this.repliesAllShow?this.userInfo.recent_replies:this.userInfo.recent_replies.slice(0,3)}}),mounted:function(){this.initData()},methods:{initData:function(){var t=this.$route.query.name;this.search(t)},search:function(t){var s=this;(function(t){var s="/user/"+t;return A()({method:"get",url:T+s}).then(function(t){return y.a.resolve(t.data)}).catch(function(t){return y.a.reject(t.data)})})(t).then(function(t){console.log(t),s.userInfo=t.data}).catch(function(t){return alert(t)})}},watch:{$route:function(t,s){this.initData()}}},M={render:function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"user-box"},[n("div",{staticClass:"base"},[n("div",{staticClass:"avatar"},[n("img",{attrs:{src:t.userInfo.avatar_url}})]),t._v(" "),n("ul",{staticClass:"items"},[n("li",{staticClass:"item"},[n("span",{staticClass:"title"},[t._v("用户名: ")]),t._v(" "),n("span",{staticClass:"text"},[t._v(t._s(t.userInfo.loginname))])]),t._v(" "),n("li",{staticClass:"item"},[n("span",{staticClass:"title"},[t._v("github: ")]),t._v(" "),n("span",{staticClass:"text"},[t._v(t._s(t.userInfo.githubUsername))])]),t._v(" "),n("li",{staticClass:"item"},[n("span",{staticClass:"title"},[t._v("积分: ")]),t._v(" "),n("span",{staticClass:"text"},[t._v(t._s(t.userInfo.score))])]),t._v(" "),n("li",{staticClass:"item"},[n("span",{staticClass:"title"},[t._v("创建时间: ")]),t._v(" "),n("span",{staticClass:"text"},[t._v(t._s(t._f("time")(t.userInfo.create_at)))])])])]),t._v(" "),n("div",{staticClass:"more"},[n("h2",{staticClass:"title"},[n("p",{staticClass:"left"},[t._v("最近发布")]),t._v(" "),n("p",{staticClass:"right",on:{click:function(s){t.topicsAllShow=!t.topicsAllShow}}},[t._v("\n        "+t._s(t.topicsAllShow?"收起":"更多>>")+"\n      ")])]),t._v(" "),n("ul",{staticClass:"default"},t._l(t.topics,function(s,e){return n("li",{key:e},[n("img",{staticClass:"avatar",attrs:{src:s.author.avatar_url}}),t._v(" "),n("div",{staticClass:"content"},[n("p",{staticClass:"title"},[t._v(t._s(s.title))]),t._v(" "),n("p",{staticClass:"row-2"},[n("span",{staticClass:"author"},[t._v(t._s(s.author.loginname))]),t._v(" "),n("span",{staticClass:"time"},[t._v(t._s(t._f("time")(s.last_reply_at)))])])])])})),t._v(" "),n("h2",{staticClass:"title"},[n("p",{staticClass:"left"},[t._v("最近参与")]),t._v(" "),n("P",{staticClass:"right",on:{click:function(s){t.repliesAllShow=!t.repliesAllShow}}},[t._v("\n        "+t._s(t.repliesAllShow?"收起":"更多>>")+"\n      ")])],1),t._v(" "),n("ul",{staticClass:"default"},t._l(t.replies,function(s,e){return n("li",{key:e},[n("img",{staticClass:"avatar",attrs:{src:s.author.avatar_url}}),t._v(" "),n("div",{staticClass:"content"},[n("p",{staticClass:"title"},[t._v(t._s(s.title))]),t._v(" "),n("p",{staticClass:"row-2"},[n("span",{staticClass:"author"},[t._v(t._s(s.author.loginname))]),t._v(" "),n("span",{staticClass:"time"},[t._v(t._s(t._f("time")(s.last_reply_at)))])])])])}))])])},staticRenderFns:[]};var z=n("Z0/y")(F,M,!1,function(t){n("kQ3+")},null,null).exports,L={data:function(){return{content:{}}},computed:o()({},Object(c.b)(["accessToken"])),mounted:function(){this.initData()},methods:{initData:function(){var t=this.accesstoken,s={accesstoken:void 0===t?"":t,id:this.$route.query.id};this.searchData(s)},searchData:function(t){var s=this;(function(t){var s="/topic/"+t.id,n={accesstoken:t.accesstoken,mdrender:!0};return A()({method:"get",url:T+s,params:n}).then(function(t){return y.a.resolve(t.data)}).catch(function(t){return y.a.reject(t.data)})})(t).then(function(t){console.log(t),s.content=t.data}).catch(function(t){console.log(t)})}}},K={render:function(){var t=this,s=t.$createElement,n=t._self._c||s;return t.content.id?n("div",{staticClass:"topicsDefault"},[n("h3",{staticClass:"title"},[t._v(t._s(t.content.title))]),t._v(" "),n("div",{staticClass:"baseInfo"},[n("img",{staticClass:"author_url",attrs:{src:t.content.author.avatar_url}}),t._v(" "),n("p",{staticClass:"row1"},[n("span",{staticClass:"author-name"},[t._v(t._s(t.content.author.loginname))]),t._v(" "),n("span",{staticClass:"time"},[t._v("发布于"+t._s(t._f("time")(t.content.create_at)))])]),t._v(" "),n("p",{staticClass:"row2"},[n("span",{staticClass:"tip"},[t._v("问答")]),t._v(" "),n("span",{staticClass:"visit-count"},[t._v(t._s(t.content.visit_count)+"次浏览")])])]),t._v(" "),n("div",{staticClass:"markdown-body",domProps:{innerHTML:t._s(t.content.content)}}),t._v(" "),n("div",{staticClass:"reply-box"},[n("h3",{staticClass:"title"},[n("span",[t._v(t._s(t.content.reply_count))]),t._v(" "),n("span",[t._v("回复")])]),t._v(" "),n("ul",{staticClass:"reply-list"},t._l(t.content.replies,function(s,e){return n("li",{key:e,staticClass:"item"},[n("div",{staticClass:"user"},[n("img",{staticClass:"avatar_url",attrs:{src:s.author.avatar_url}}),t._v(" "),n("span",{staticClass:"name"},[t._v(t._s(s.author.loginname))]),t._v(" "),n("span",{staticClass:"time"},[t._v(t._s(t._f("time")(s.create_at)))])]),t._v(" "),n("div",{staticClass:"markdown-body",staticStyle:{"margin-left":"0","margin-right":"0"},domProps:{innerHTML:t._s(s.content)}}),t._v(" "),n("div",{staticClass:"more"},[n("span",{staticClass:"good"},[n("i",{staticClass:"icon-good"}),t._v(" "),n("span",[t._v(t._s(s.ups.length))])]),t._v(" "),t._m(0,!0)])])}))])]):t._e()},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("span",{staticClass:"reply"},[s("i",{staticClass:"icon-code"})])}]};var R=n("Z0/y")(L,K,!1,function(t){n("ncga")},null,null).exports;a.a.use(g.a);var Z,J=new g.a({routes:[{path:"/",name:"Index",component:$},{path:"/login",name:"login",component:H},{path:"/user",name:"user",component:z},{path:"/topics",name:"topics",component:R}]}),P=n("3cXf"),q=n.n(P),B=function(t,s){if(t&&"string"==typeof t){if(t&&void 0===s){var n=JSON.parse(window.sessionStorage.getItem("nsnds_"+t));return null===n?void 0:n}return window.sessionStorage.setItem("nsnds_"+t,q()(s)),"ok"}},U={shadeShow:!1,menuShow:!1,accessToken:B("accessToken"),loginInfo:B("loginInfo")},W=function(t){return t.shadeShow},Y=function(t){return t.menuShow},G=function(t){return t.accessToken},X=function(t){return t.loginInfo},Q=n("a3Yh"),V=n.n(Q),tt=(Z={},V()(Z,"SET_SHADE_SHOW",function(t,s){t.shadeShow=s}),V()(Z,"SET_MENU_SHOW",function(t,s){t.menuShow=s}),V()(Z,"SET_ACCESS_TOKEN",function(t,s){B("accessToken",s),t.accessToken=s}),V()(Z,"SET_LOGIN_INFO",function(t,s){B("loginInfo",s),t.loginInfo=s}),Z);n("6LYt");a.a.use(c.a);var st=new c.a.Store({state:U,getters:e,mutations:tt,strict:!1,plugins:[]}),nt=n("iDdd"),et=n.n(nt),at=n("lJzc"),it=n.n(at);n("3HKF"),n("0lia");et.a.attach(document.body),a.a.use(it.a,{loading:n("NBF2")}),a.a.filter("time",function(t){return"string"!=typeof t?"":t.split(".")[0].split("T").join(" ")}),a.a.config.productionTip=!1,new a.a({el:"#app",router:J,store:st,render:function(t){return t(C)}})},TbAA:function(t,s){},YNnX:function(t,s){},ezK7:function(t,s){},"kQ3+":function(t,s){},ncga:function(t,s){}},["NHnr"]);
//# sourceMappingURL=app.5b86a6326e9ef3d3d456.js.map